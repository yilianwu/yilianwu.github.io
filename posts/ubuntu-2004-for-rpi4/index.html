<!DOCTYPE html>
<html lang="zh-tw"><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="google-site-verification" content="ecnbl87JwcfWTJMChfv-5hv5Oui6nsHqvaTr0ha3Mjg" />
    <title>[ yilianwu ]</title>
    <link rel="shortcut icon" href="img/favicon.ico">
    <link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
	  <link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">

    <link rel="stylesheet" href="https://yilianwu.github.io/css/styles.css">
    <link rel="stylesheet" href="https://yilianwu.github.io/css/font.css">
</head>
<body><header>
    <nav class="breadcrumb" id="breadcrumb">
	     <h4><a href="/">[ yilianwu ]</a></h4>
	       
            
            <a href="/info">INFO</a>
            
            <a href="/posts">POSTS</a>
            
            <a href="/works">WORKS</a>
            
    </nav>
    <div class="menutime">
      <a id='cd' ></a>
      <a id='ct' ></a>
      <script type="text/javascript" src="/js/menutime.js"></script>
    </div>
</header>

<main id="single">
  <div id="post" class="white">
	   <div class="container">
        <div class="post-toc" id="post-toc">
            <h2 class="post-toc-title">Contents</h2>
            <nav id="TableOfContents">
<ul>
<li><a href="#ubuntu-20-04-lst">Ubuntu 20.04 LST</a></li>
<li><a href="#create-a-bootable-microsd-card">Create a Bootable microSD card</a></li>
<li><a href="#configuration-before-boot">Configuration Before Boot</a></li>
<li><a href="#first-boot">First Boot</a>
<ul>
<li><a href="#更新系統">更新系統</a></li>
<li><a href="#install-ubuntu-desktop">Install Ubuntu Desktop</a></li>
</ul></li>
<li><a href="#bluetooth">Bluetooth</a></li>
<li><a href="#exfat">exFAT</a></li>
<li><a href="#su-authentication-failure">su: Authentication failure</a></li>
<li><a href="#實測結果">實測結果</a></li>
</ul>
</nav>
        </div>
       <div class="paperbg">
            <div id="title">
                <h1>Install Ubuntu 20.04 On Raspberry Pi 4 Full Ubuntu Desktop</h1>
                
	          </div>
            <div class="post-meta">
                <span class="post-time"> 2020-05-14 </span>
                <div class="post-tag">
                  
                    <a class="tag-link" href="/tags/raspberry-pi/"> Raspberry Pi </a>
                    <a class="tag-link" href="/tags/ubuntu/"> Ubuntu </a>
                    </div>


                <section class="post-content">
                

<h1 id="ubuntu-20-04-lst">Ubuntu 20.04 LST&nbsp;<a href="#ubuntu-20-04-lst" class="anchor"></a> </h1>

<p>到官網下載 Ubuntu Server image檔<br />
<a href="https://ubuntu.com/download/raspberry-pi">https://ubuntu.com/download/raspberry-pi</a></p>

<h1 id="create-a-bootable-microsd-card">Create a Bootable microSD card&nbsp;<a href="#create-a-bootable-microsd-card" class="anchor"></a> </h1>

<p>以下在MacOS上做示範</p>

<p>把剛剛下載好的Ubuntu image放在 <code>~/Downloads</code></p>

<p>打開終端機</p>

<pre><code>diskutil list
</code></pre>

<p>查看microSD的位址</p>

<pre><code>/dev/disk0 (internal, physical):
   #:                       TYPE NAME                    SIZE       IDENTIFIER
   0:      GUID_partition_scheme                        *251.0 GB   disk0
   1:                        EFI EFI                     209.7 MB   disk0s1
   2:                 Apple_APFS Container disk1         250.8 GB   disk0s2

/dev/disk1 (synthesized):
   #:                       TYPE NAME                    SIZE       IDENTIFIER
   0:      APFS Container Scheme -                      +250.8 GB   disk1
                                 Physical Store disk0s2
   1:                APFS Volume Macintosh HD            204.2 GB   disk1s1
   2:                APFS Volume Preboot                 45.9 MB    disk1s2
   3:                APFS Volume Recovery                522.7 MB   disk1s3
   4:                APFS Volume VM                      3.2 GB     disk1s4

/dev/disk2
#:     TYPE NAME                       SIZE         IDENTIFIER
0:     FDisk_partition_scheme         *31.9 GB          disk2
1:     DOS_FAT_32 NO NAME              31.9 GB          disk2s1
</code></pre>

<p>所以<code>/dev/disk2</code>是我的microSD card</p>

<p>Unmount the microSD card</p>

<pre><code>diskutil umountDisk /dev/disk2
</code></pre>

<p>You will see</p>

<pre><code>Umount of all volumes on /dev/disk2 was successful
</code></pre>

<p>Copy the image to the microSD card</p>

<pre><code>sudo sh -c 'gunzip -c ~/Downloads/ubuntu-20.04-preinstalled-server-arm64+raspi.img.xz | sudo dd of=/dev/disk2 bs=32m'
</code></pre>

<p>When finalised you will see</p>

<pre><code>3719+1 records in
3719+1 records out
3899999744 bytes transferred in 642.512167 secs (6069924 bytes/sec)
</code></pre>

<h1 id="configuration-before-boot">Configuration Before Boot&nbsp;<a href="#configuration-before-boot" class="anchor"></a> </h1>

<p>編輯<code>config.txt</code><br />
官方文獻：
<a href="https://www.raspberrypi.org/documentation/configuration/config-txt/">https://www.raspberrypi.org/documentation/configuration/config-txt/</a></p>

<p>設定overclock 讓rpi可以充分發揮它的效能</p>

<pre><code>over_voltage=4
arm_freq=2000
gpu_freq=650
</code></pre>

<p>HDMI輸出設定</p>

<pre><code>hdmi_force_hotplug=1
hdmi_ignore_edid=0xa5000080
config_hdmi_boost=4
</code></pre>

<p>讓audio ouput不要從HDMI出來 而是從3.5mm</p>

<pre><code>hdmi_ignore_edid_audio=1
</code></pre>

<p>退出microSD 放到rpi裡面<br />
確定接上HDMI cable再啟動電源</p>

<h1 id="first-boot">First Boot&nbsp;<a href="#first-boot" class="anchor"></a> </h1>

<p>開機前 把乙太網路插好 可以省下設定無線網路卡的麻煩<br />
第一次開機後的登入帳號密碼為 : <code>ubuntu/ubuntu</code> 登入後會要求立即變更密碼</p>

<p>然後依下面方式新增帳號, 並將原本的ubuntu帳號刪除</p>

<pre><code>sudo useradd -m -s /bin/bash youraccount
sudo passwd youraccount
sudo adduser youraccount sudo
logout後, 使用新帳號登入
sudo userdel -r ubuntu
</code></pre>

<h2 id="更新系統">更新系統&nbsp;<a href="#更新系統" class="anchor"></a> </h2>

<pre><code>sudo apt-get update
sudo apt-get upgrade
sudo apt-get dist-upgrade
</code></pre>

<p>下載網路時間伺服器</p>

<pre><code>sudo apt-get install ntp
</code></pre>

<p>到目前為止 Ubuntu Server版本已安裝完成<br />
只有文字介面</p>

<h2 id="install-ubuntu-desktop">Install Ubuntu Desktop&nbsp;<a href="#install-ubuntu-desktop" class="anchor"></a> </h2>

<p>若想當成desktop來使用的話 就必需再安裝桌面程式 目前可用的桌面程式有<br />
ubuntu-desktop, kubuntu-desktop, lubuntu-desktop, xubuntu-desktop, ubuntu-mate-desktop</p>

<p>kubuntu跑不太動 不建議安裝<br />
xubuntu跟lubuntu是輕量級的版本 但韌體比較舊</p>

<p>我自己是裝 ubuntu-desktop</p>

<pre><code>sudo apt-get install ubuntu-desktop
</code></pre>

<h1 id="bluetooth">Bluetooth&nbsp;<a href="#bluetooth" class="anchor"></a> </h1>

<p>Raspberry Pi 4 B Ubuntu Bluetooth not working / detected</p>

<p>Method 0:</p>

<pre><code>hcitool dev
</code></pre>

<pre><code>sudo systemctl restart bluetooth
</code></pre>

<pre><code>systemctl status bluetooth
</code></pre>

<pre><code>sudo add-apt-repository ppa:bluetooth/bluez
</code></pre>

<pre><code>sudo apt install bluez
</code></pre>

<p>Method 1:</p>

<pre><code>sudo apt install unity-control-center
</code></pre>

<p>Method 2:</p>

<pre><code>sudo vim /boot/firmware/syscfg.txt
</code></pre>

<pre><code># include nobtcfg.txt
include btcfg.txt
</code></pre>

<p>Install pi-bluetooth</p>

<pre><code>sudo apt-get install pi-bluetooth
</code></pre>

<h1 id="exfat">exFAT&nbsp;<a href="#exfat" class="anchor"></a> </h1>

<p>Problem mounting exFAT disk on Ubuntu</p>

<pre><code>sudo apt install exfat-fuse exfat-utils
</code></pre>

<h1 id="su-authentication-failure">su: Authentication failure&nbsp;<a href="#su-authentication-failure" class="anchor"></a> </h1>

<pre><code>sudo passwd root
Enter new UNIX password: 
Retype new UNIX password: 
passwd: password updated successfully
</code></pre>

<h1 id="實測結果">實測結果&nbsp;<a href="#實測結果" class="anchor"></a> </h1>

<p>果然2000多塊錢的電腦是無法取代普通PC的<br />
開瀏覽器看YouTube的影片720p就有些吃力了 有fps跑不順的狀況<br />
我沒有裝Raspbian比較過 但xubuntu-desktop跑起來會比ubuntu-desktop來得順很多</p>

<p>還有另一個問題是輸出的畫面有時候暗掉 會變一格一格的像素<br />
滑鼠游標移過去的地方才會再顯現 :&lsquo;(<br />
<img src="https://media.giphy.com/media/kdW0DcTOXZEAXrLplh/giphy.gif" alt="Imgur" /></p>

                </section>
        
            </div>
	     </div>



     </div>
  </div>
</main>
<footer class="sand">

	<a href="https://www.facebook.com/beatboxyilianwu" target="_blank"><img src="https://i.imgur.com/EJhxgWk.png" height="30" width="30"></a>
	<a href="https://twitter.com/YiLianWu" target="_blank"><img src="https://i.imgur.com/KvvGcoN.png" height="30" width="30"></a>
	<a href="https://www.instagram.com/weelian/" target="_blank"><img src="https://i.imgur.com/FVUwWv0.png" height="30" width="30"></a>
	
	<a href="https://github.com/yilianwu" target="_blank"><img src="https://i.imgur.com/BIgEqmF.png" height="30" width="30"></a>
	<a href="https://www.linkedin.com/in/yilianwu/" target="_blank"><img src="https://i.imgur.com/hCGvLEq.png" height="30" width="30"></a>

    <span style="display:block" class="footer-text">&copy 2019-2020 吳羿璉. All rights reserved. Powered by <a href="https://gohugo.io/" target="_blank">Hugo</a></span>
</footer>
<script src="https://code.jquery.com/jquery-latest.js"></script>
<script>
	$('.post-content h1').prepend("§ ");
</script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        displayAlign: "left"
    });
</script>
<script type="text/javascript"
	src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script> 
<link rel="stylesheet" href="https://yilianwu.github.io/css/solarized-light.css"/>
<script src="https://yilianwu.github.io/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
</body>
</html>
